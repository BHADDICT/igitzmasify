<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Masify Contract - Digital Signature</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
<style>
  :root {
    --primary-color: #7b1e1e;
    --text-color: #222;
    --bg-color: #fff;
    --accent-color: #b71c1c;
    --gap: 24px;
    --max-width: 720px;
  }
  * { box-sizing: border-box; }
  body, html {
    margin: 0; padding: 0;
    font-family: 'Inter', sans-serif;
    background: var(--bg-color);
    color: var(--text-color);
    min-height: 100vh;
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  .container {
    max-width: var(--max-width);
    margin: 48px auto;
    padding: 0 var(--gap);
  }
  header {
    margin-bottom: 40px;
    text-align: center;
  }
  header h1 {
    font-weight: 600;
    font-size: 2rem;
    color: var(--primary-color);
    margin-bottom: 8px;
  }
  header p {
    font-size: 1rem;
    color: #555;
  }
  form { display: grid; gap: 20px; }
  label { font-weight: 600; color: var(--primary-color); }
  input[type="text"], input[type="tel"] {
    width: 100%; padding: 10px; font-size: 1rem;
    border: 1.5px solid #ccc; border-radius: 6px;
    transition: border-color 0.3s;
  }
  input[type="text"]:focus, input[type="tel"]:focus {
    outline: none; border-color: var(--accent-color);
  }
  .contract-section { font-weight: 700; margin-top: 24px; color: var(--primary-color); }
  .signature-container { margin-top: 20px; }
  #signature-pad {
    border: 2px solid var(--accent-color);
    border-radius: 6px;
    width: 100%; max-width: 400px;
    height: 150px;
    touch-action: none;
    background: #f8f8f8;
  }
  #signature-pad.disabled { pointer-events: none; background: #eee; }
  .buttons {
    margin-top: 24px;
    display: flex; gap: 16px; flex-wrap: wrap;
  }
  button {
    cursor: pointer; padding: 12px 24px;
    background: var(--accent-color); color: white;
    font-weight: 600; font-size: 1rem;
    border: none; border-radius: 6px;
    transition: background 0.3s ease;
    flex-grow: 1; max-width: 200px;
  }
  button:hover { background: #7b1e1e; }
  footer {
    margin-top: 80px; font-size: 0.8rem;
    color: #999; text-align: center;
  }
  @media (max-width: 480px) {
    .buttons { flex-direction: column; }
    button { max-width: 100%; }
  }
  /* Modal */
  #previewModal {
    display: none; position: fixed; z-index: 1000;
    left: 0; top: 0; width: 100vw; height: 100vh;
    background: rgba(0,0,0,0.6);
    justify-content: center; align-items: center;
  }
  #previewModal.active { display: flex; }
  .modal-content {
    background: white; padding: 24px;
    max-width: 600px; max-height: 90vh;
    overflow-y: auto; border-radius: 8px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  }
</style>
</head>
<body>

<div class="container">
  <header>
    <h1>Masify Contract</h1>
    <p>Preview and sign your Website Service Agreement</p>
  </header>

  <form id="contractForm" autocomplete="off">
    <label for="clientName">Client Name</label>
    <input type="text" id="clientName" required>

    <label for="brandName">Brand Name</label>
    <input type="text" id="brandName" required>

    <label for="clientPhone">Client Phone</label>
    <input type="tel" id="clientPhone" required>

    <label for="clientInstagram">Client Instagram Username</label>
    <input type="text" id="clientInstagram" required>

    <div class="buttons">
      <button type="button" id="previewBtn">Preview Contract</button>
    </div>

    <div class="contract-section">Signature</div>
    <div class="signature-container">
      <canvas id="signature-pad" width="400" height="150" class="disabled"></canvas>
      <div class="buttons">
        <button type="button" id="clear" disabled>Clear Signature</button>
      </div>
    </div>

    <div class="buttons">
      <button type="submit" id="generatePdfBtn" disabled>Download PDF</button>
    </div>
  </form>
</div>

<footer>&copy; 2025 Masify. All rights reserved.</footer>

<!-- Preview Modal -->
<div id="previewModal">
  <div class="modal-content">
    <h2>Contract Preview</h2>
    <pre id="contractText" style="white-space: pre-wrap; font-size: 0.95rem; line-height: 1.5;"></pre>
    <div class="buttons">
      <button id="closePreview">Close</button>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
const { jsPDF } = window.jspdf;
const signaturePad = new SignaturePad(document.getElementById('signature-pad'), {
  backgroundColor: 'rgba(255,255,255,0)',
  penColor: 'rgb(183,28,28)'
});
signaturePad.off();

const previewModal = document.getElementById('previewModal');
const contractTextArea = document.getElementById('contractText');

document.getElementById('previewBtn').addEventListener('click', () => {
  const name = document.getElementById('clientName').value || '[To be filled]';
  const brand = document.getElementById('brandName').value || '[To be filled]';
  const phone = document.getElementById('clientPhone').value || '[To be filled]';
  const insta = document.getElementById('clientInstagram').value || '[To be filled]';
  const date = new Date().toLocaleDateString();

  const contract = `Website Service Agreement

This Website Service Agreement ("Agreement") is made and entered into as of ${date} ("Effective Date") by and between:

1. Service Provider:
   Mara Masita
   Phone: 0716145925
   Instagram: x_cool_msa2

2. Client:
   ${name}
   Brand: ${brand}
   Phone: ${phone}
   Instagram: @${insta}

1. Services
The Service Provider agrees to provide website editing and updating services to the Client for a period of two (2) years from the Effective Date.

2. Limitations
The Client acknowledges that the Service Provider will provide services only for the website and does not include domain registration.

3. Payment Terms
based on the selected packages

4. Termination
Either party may terminate this Agreement by providing written notice 30 days in advance.

5. No hard feeling
This Agreement shall always be honest and pleasure for both parties.

6. Entire Agreement
This Agreement constitutes the entire understanding between the parties and supersedes all prior agreements.
`;

  contractTextArea.textContent = contract;
  previewModal.classList.add('active');
});

document.getElementById('closePreview').addEventListener('click', () => {
  previewModal.classList.remove('active');
  signaturePad.on();
  document.getElementById('signature-pad').classList.remove('disabled');
  document.getElementById('clear').disabled = false;
  document.getElementById('generatePdfBtn').disabled = false;
});

document.getElementById('clear').addEventListener('click', () => {
  signaturePad.clear();
});

document.getElementById('contractForm').addEventListener('submit', (e) => {
  e.preventDefault();
  if (signaturePad.isEmpty()) {
    alert('Please sign before downloading.');
    return;
  }
  const name = document.getElementById('clientName').value;
  const brand = document.getElementById('brandName').value;
  const phone = document.getElementById('clientPhone').value;
  const insta = document.getElementById('clientInstagram').value;
  const date = new Date().toLocaleDateString();

  const doc = new jsPDF();
  doc.setFontSize(16);
  doc.setTextColor('#b71c1c');
  doc.text('Website Service Agreement', 105, 20, { align: 'center' });

  doc.setFontSize(12);
  doc.setTextColor('#000');
  let y = 40;
  const text = `This Website Service Agreement ("Agreement") is made and entered into as of ${date} ("Effective Date") by and between:

1. Service Provider:
   Mara Masita
   Phone: 0716145925
   Instagram: x_cool_msa2

2. Client:
   ${name}
   Brand: ${brand}
   Phone: ${phone}
   Instagram: @${insta}

1. Services
The Service Provider agrees to provide website editing and updating services to the Client for a period of two (2) years from the Effective Date.

2. Limitations
The Client acknowledges that the Service Provider will provide services only for the website and does not include domain registration.

3. Payment Terms
based on the selected packages
4. Termination
Either party may terminate this Agreement by providing written notice 30 days in advance.

5. No hard feeling
This Agreement shall always be honest and pleasure for both parties.

6. Entire Agreement
This Agreement constitutes the entire understanding between the parties and supersedes all prior agreements.
`;

  const lines = doc.splitTextToSize(text, 180);
  doc.text(lines, 15, y);

  const imgData = signaturePad.toDataURL('image/png');
  doc.addImage(imgData, 'PNG', 15, 250, 60, 30);

  doc.save(`Masify_Contract_${name.replace(/\s+/g,'_')}.pdf`);
});
</script>
</body>
</html>
